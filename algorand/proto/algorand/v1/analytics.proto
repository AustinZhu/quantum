syntax = "proto3";

package quant.algorand.v1;
option go_package = "github.com/AustinZhu/quantum/datafeed/internal/gen/algorand/v1;algorandv1";

import "common/v1/common.proto";

service AnalyticsService {
  rpc GetPerformanceSummary(GetPerformanceSummaryRequest) returns (GetPerformanceSummaryResponse);
  rpc GetPlotlyArtifact(GetPlotlyArtifactRequest) returns (GetPlotlyArtifactResponse);
  rpc GetTradingViewSeries(GetTradingViewSeriesRequest) returns (GetTradingViewSeriesResponse);
}

message GetPerformanceSummaryRequest {
  RunId run_id = 1;
}

message Metric {
  string name = 1;
  double value = 2;
  string unit = 3;
}

message GetPerformanceSummaryResponse {
  RunId run_id = 1;
  repeated Metric metrics = 2;
}

message GetPlotlyArtifactRequest {
  string artifact_id = 1;
}

message GetPlotlyArtifactResponse {
  PlotlyFigureSpec spec = 1;
}

message GetTradingViewSeriesRequest {
  RunId run_id = 1;
  string symbol = 2;
  string interval = 3;
}

message GetTradingViewSeriesResponse {
  repeated TradingViewSeries series = 1;
  TradingViewResponseMeta meta = 2;
}
